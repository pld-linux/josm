--- josm-src-snapshot-3176/build.xml.orig	2010-03-28 16:43:59.000000000 +0200
+++ josm-src-snapshot-3176/build.xml	2010-04-21 09:12:11.000000000 +0200
@@ -41,19 +41,11 @@
 	  -->
 	<target name="create-revision">
 		<property name="revision.dir" value="${build.dir}"/>
-		<exec append="false" output="REVISION.XML" executable="svn" failifexecutionfails="false">
-			<env key="LANG" value="C"/>
-			<arg value="info"/>
-			<arg value="--xml"/>
-			<arg value="."/>
-		</exec>
-		<xmlproperty file="REVISION.XML" prefix="version" keepRoot="false" collapseAttributes="true"/>
-		<delete file="REVISION.XML" />
+		<loadfile property="version.entry.commit.revision" srcFile="rpm_version"/>
 		<tstamp>
 			<format property="build.tstamp" pattern="yyyy-MM-dd HH:mm:ss"/>
 		</tstamp>
 
-		<property name="version.entry.commit.revision" value="UNKNOWN"/>
 		<mkdir dir="${revision.dir}" />
 		<echo file="${revision.dir}/REVISION">
 # automatically generated by JOSM build.xml - do not edit
@@ -65,16 +57,7 @@
 
 
 	<target name="dist" depends="compile,create-revision">
-
-		<exec append="false" output="REVISION" executable="svn" failifexecutionfails="false">
-			<env key="LANG" value="C"/>
-			<arg value="info"/>
-			<arg value="--xml"/>
-			<arg value="."/>
-		</exec>
-		<xmlproperty file="REVISION" prefix="version" keepRoot="false" collapseAttributes="true"/>
-		<delete file="REVISION"/>
-		<property name="version.entry.commit.revision" value="UNKNOWN"/>
+		<loadfile property="version.entry.commit.revision" srcFile="rpm_version"/>
 		<property name="version.entry.commit.date" value="UNKNOWN"/>
 		<echo>Revision ${version.entry.commit.revision}</echo>
 		<copy file="CONTRIBUTION" todir="build"/>

